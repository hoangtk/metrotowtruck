<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>  
        <record id="metro_view_project_tree" model="ir.ui.view">
            <field name="name">metro_view_project_tree</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project"/>
            <field name="arch" type="xml">
            	<field name="name" position='after'>
            		<field name="mfg_ids" widget='many2many_tags'/>
            	</field>
        	</field>    
       	</record> 
        <record model="ir.ui.view" id="metro_project_form_view">
            <field name="name">metro_project_form_view</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">
            	<page name="team" position="before">
                    <page string="MFG IDs" name="mfg_ids">
	                    <field name="mfg_ids" domain="[('state','in',('confirmed','engineer'))]"/>
                    </page>
                    <page string="Bill of Material" name="bom">
                    	<group>
                    		<group>
			                    <label for="bom_id"/>
			                    <div>
			                        <field name="bom_id" class="oe_inline"/> 
				            		<button string="Import BOM" name="%(metro_mrp.action_view_bom_import)d" type="action"/>
			                    </div>
								<field name="single_mrp_prod_order"/>  		
                    		</group>
                    		<group>
	                    		<field name="product_id"/>
                    		</group>
                    	</group>
                    	<label for='components'/>
	                    <field name="bom_components" widget='one2many_tree'/>
                    </page>
            	</page>
            </field>
        </record>   
        
        <record model="ir.ui.view" id="metro_project_task_form_view">
            <field name="name">metro_project_task_form_view</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
				<field name="description" position="replace">
				</field>
				<xpath expr="//notebook" position="before">
					<field name="description" attrs="{'readonly':[('state','=','done')]}" placeholder="Add a Description..."/>
				</xpath>
				<xpath expr="//page[@string='Description']" position="attributes">
					<attribute name="string">Work Hours</attribute>
					<attribute name="name">work_hours</attribute>
				</xpath>
				<xpath expr="//page[@string='Extra Info']"  position="before">
                    <page string="Bill of Material" name="bom">
			            <!-- <field name="is_project_bom"/> --> 
                    	<group>
                    		<group>
			                    <label for="bom_id"/>
			                    <div>			                    
			                        <field name="bom_id" class="oe_inline"/> 
				            		<button string="Import BOM" name="%(metro_mrp.action_view_bom_import)d" type="action"/>
			                    </div>	                    		
                    		</group>
                    		<group>
	                    		<field name="product_id"/>
                    		</group>
                    	</group>
                    	<label for='components'/>
	                    <field name="components" widget='one2many_tree'/>
                    </page>
				</xpath>        	         
            </field>
        </record>           
    </data>
</openerp>
